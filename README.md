# YT Cut Bot

## Описание

YT Cut Bot - это Telegram бот, который позволяет загружать видео с YouTube, обрезать их и отправлять обратно в Telegram или загружать на transfer.sh, если размер файла превышает 200 МБ.

## Зависимости

Данный бот использует следующие библиотеки:

- `logging` для логирования
- `time` для работы со временем
- `yt_dlp` для загрузки видео с YouTube
- `subprocess` для запуска shell команд
- `os` для работы с файловой системой
- `requests` для отправки HTTP запросов
- `telegram` для взаимодействия с Telegram API
- `re` для работы с регулярными выражениями
- `tqdm` для отображения прогресса загрузки
- `requests_toolbelt` для работы с multipart формами

## Установка

1. Клонируйте этот репозиторий
```bash
git clone https://github.com/yourusername/your-repo-name.git
```

2. Перейдите в директорию проекта
```bash
cd your-repo-name
```

3. Создайте и заполните файл .env с вашими переменными окружения (TOKEN и ALLOWED_USER_IDS)

## Использование

### Сборка Docker образа

```bash
make build
```

### Запуск бота

```bash
make run
```

### Остановка бота

```bash
make stop
```

### Удаление Docker образа

```bash
make rm
```

### Пересборка Docker образа

```bash
make rebuild
```

## Использование

Для использования бота необходимо заменить `TOKEN` на токен вашего бота в `.env` файле, там же указать `ALLOWED_USER_IDS` с списком пользователей которые смогут использовать бота, разделив его запятыми.

### Команды

Бот поддерживает следующие команды:

- `/start` - начинает взаимодействие с ботом
- `/cut <video_link> <start_time> <duration>` - загружает видео по ссылке `video_link`, обрезает его, начиная с `start_time` на протяжении `duration` и отправляет обратно в Telegram или загружает на transfer.sh
- `/download <video_link>` - загружает видео по ссылке `video_link` и отправляет его обратно в Telegram или загружает на transfer.sh

## Работа с файлами

Все загружаемые и обрезанные видео временно сохраняются на диск в виде `temp_video.mp4` и `output_video.mp4` соответственно. После отправки они удаляются.

## Загрузка на transfer.sh

Если размер файла превышает 200 МБ, он загружается на transfer.sh. После загрузки в чат отправляется ссылка на загруженный файл и токен для его удаления.
